import{s as P,a as F,b as E,c as T,g as b,_ as z,R as B}from"./getRenderLoop-C12lOm9E.js";import{i as R,g as x,C as W}from"./touchCoordinates-Bw5yO7gY.js";import{d as k,o as I,c as U,a as w,w as $,n as G,b as V,_ as D}from"./index-C_69i0rk.js";const H=(r,t)=>{const e=Math.floor(r.width/t),n=Math.floor(r.height/t),i=t*e,f=t*n,h=(r.width-i)/2,p=(r.height-f)/2;return{xCellsCount:e,yCellsCount:n,gridWidth:i,gridHeight:f,offsetLeft:h,offsetTop:p}},N=r=>r<10?0:r<20?1:2,X=({canvas:r,context:t,cellSize:e,showGrid:n,colors:{colorBackground:i,colorGrid:f,colorCell:h}})=>{const p=H(r,e);return{gridSizeParams:p,renderGrid:()=>{if(t.fillStyle=i,t.fillRect(0,0,r.width,r.height),!n)return;const{xCellsCount:l,yCellsCount:s,gridWidth:a,gridHeight:m,offsetLeft:o,offsetTop:d}=p;t.strokeStyle=f,t.beginPath();for(let c=0;c<=l;c+=1){const g=e*c;t.moveTo(g+o,d),t.lineTo(g+o,m+d)}for(let c=0;c<=s;c+=1){const g=e*c;t.moveTo(o,g+d),t.lineTo(a+o,g+d)}t.stroke()},renderCell:l=>{const{offsetTop:s,offsetLeft:a}=p,m=N(e),o=e-m*2,d=[l[0]*e+a+m,l[1]*e+s+m];t.fillStyle=h,t.fillRect(...d,o,o)},getCellByCoordinates:l=>{const s=P(l,[p.offsetLeft,p.offsetTop]);if(s[0]<0||s[1]<0)return;const a=[Math.floor(s[0]/e),Math.floor(s[1]/e)];if(!(a[0]>=p.xCellsCount||a[1]>=p.yCellsCount))return a}}},Y=({xCellsCount:r,yCellsCount:t})=>{const e=[];for(let n=0;n<r;n++)e[n]=Array(t).fill(!1);return e},j=({gridSize:{xCellsCount:r,yCellsCount:t}})=>{let e;const n=()=>{e=Y({xCellsCount:r,yCellsCount:t})};n();const i=()=>e,f=()=>{let C=!1;return e=e.map((l,s)=>l.map((a,m)=>{var c;let o=0;for(let g=-1;g<=1;g+=1)for(let u=-1;u<=1;u+=1)!(g===0&&u===0)&&((c=e[s+g])!=null&&c[m+u])&&(o+=1);const d=a&&o===2||o===3;return!C&&a!==d&&(C=!0),d})),C},h=C=>{C.forEach(([l,s])=>{var a;((a=e[l])==null?void 0:a[s])!==void 0&&(e[l][s]=!e[l][s])})},p=[Math.floor(r/2),Math.floor(t/2)];return{setEmptyMatrix:n,getMatrix:i,updateGeneration:f,setPoints:h,putFigureToCenter:C=>{const l=C.reduce((o,[d,c])=>({top:c<o.top?c:o.top,right:d>o.right?d:o.right,bottom:c>o.bottom?c:o.bottom,left:d<o.left?d:o.left}),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),s=[Math.floor((l.right-l.left)/2),Math.floor((l.bottom-l.top)/2)],m=C.map(o=>P(o,[l.left,l.top])).map(o=>F(o,P(p,s)));h(m)},randomFill:()=>{e=e.map(C=>C.map(()=>Math.random()<.333))}}},A=[[20,18],[20,19],[20,20],[20,21],[20,22],[20,23],[20,24],[20,25],[20,26],[20,27],[21,27],[22,27],[23,27],[24,27],[25,27],[27,18],[27,19],[27,20],[27,21],[27,22],[27,23],[27,24],[27,25],[27,26],[27,27],[29,18],[29,19],[29,20],[29,21],[29,22],[29,23],[29,24],[29,25],[29,26],[29,27],[30,18],[30,22],[31,18],[31,22],[32,18],[32,22],[33,18],[33,22],[34,18],[34,22],[36,18],[36,19],[36,20],[36,21],[36,22],[36,23],[36,24],[36,25],[36,26],[36,27],[37,18],[37,23],[37,27],[38,18],[38,23],[38,27],[39,18],[39,23],[39,27],[40,18],[40,23],[40,27],[41,18],[41,23],[41,27]],v=(r,t)=>{r.forEach((e,n)=>{e.forEach((i,f)=>{i&&t([n,f])})})},q=({canvas:r})=>{const t=r.getContext("2d");E(t);let e,n,i;const f={cellSize:20,framesPerSecond:10},h=()=>{e=X({canvas:r,context:t,cellSize:f.cellSize,showGrid:f.cellSize>=10,colors:{colorBackground:"#212529",colorGrid:"#343a40",colorCell:"#0d6efd"}}),n=j({gridSize:{xCellsCount:e.gridSizeParams.xCellsCount,yCellsCount:e.gridSizeParams.yCellsCount}}),i=b(()=>{n.updateGeneration()||i.stop(),e.renderGrid(),v(n.getMatrix(),e.renderCell)},{framesPerSecond:f.framesPerSecond}),e.renderGrid(),n.putFigureToCenter(A),v(n.getMatrix(),e.renderCell)};h();const p=()=>{i.toggle()},_=()=>{i.stop(),n.setEmptyMatrix(),e.renderGrid()},S=()=>{e.renderGrid(),n.randomFill(),v(n.getMatrix(),e.renderCell)},C=u=>{f.cellSize!==u&&(f.cellSize=u,h())},l=u=>{f.framesPerSecond=u,i.setFramesPerSecond(u)};let s,a=!1;const m=u=>{const M=e.getCellByCoordinates(u);!M||s&&T(M,s)||(s=M,n.setPoints([M]),e.renderGrid(),v(n.getMatrix(),e.renderCell))},o=u=>{const[M,y]=x(u);a=!0,i.stop(),m([M,y])},d=()=>{a=!1,s=void 0},c=u=>{const[M,y]=x(u);if(!a){s&&(s=void 0);return}m([M,y])};return R()?(r.addEventListener("touchstart",o),window.addEventListener("touchend",d),r.addEventListener("touchmove",c)):(r.addEventListener("mousedown",o),window.addEventListener("mouseup",d),r.addEventListener("mousemove",c)),{togglePlay:p,clear:_,randomFill:S,setSize:C,setSpeed:l,cleanup:()=>{window.removeEventListener("mouseup",d),window.removeEventListener("touchend",d),i.stop()}}},J=k({__name:"game-of-life",setup(r){let t;const e=i=>{t=q({canvas:i})};I(()=>{t==null||t.cleanup()});const n=[[{text:"Play",action:()=>void(t==null?void 0:t.togglePlay())},{text:"Clear",action:()=>void(t==null?void 0:t.clear())},{text:"Random Fill",action:()=>void(t==null?void 0:t.randomFill())}],[{text:"Cells small",action:()=>void(t==null?void 0:t.setSize(5))},{text:"Cells medium",action:()=>void(t==null?void 0:t.setSize(10))},{text:"Cells large",action:()=>void(t==null?void 0:t.setSize(20))}],[{text:"Speed small",action:()=>void(t==null?void 0:t.setSpeed(10))},{text:"Speed medium",action:()=>void(t==null?void 0:t.setSpeed(20))},{text:"Speed maximum",action:()=>void(t==null?void 0:t.setSpeed("auto"))}]];return(i,f)=>(V(),U("div",{class:G(i.$style.root)},[w(z,{class:G(i.$style.canvasWrapper)},{default:$(({size:h})=>[w(B,{size:h,onMounted:e},null,8,["size"])]),_:1},8,["class"]),w(W,{buttons:n,class:G(i.$style.controls)},null,8,["class"])],2))}}),K="_root_1mogh_1",Q="_canvasWrapper_1mogh_6",Z="_controls_1mogh_11",L={root:K,canvasWrapper:Q,controls:Z},O={$style:L},rt=D(J,[["__cssModules",O]]);export{rt as default};
